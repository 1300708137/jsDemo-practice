## 疫情地图实现

### 项目简介

模仿丁香园实时疫情图，使用原生js结合Echarts，使用node的框架express爬取网站数据，实现疫情效果展示效果

![效果如图](F:\demo练习\node\2020疫情地图\img\show.png)

> 你在看到这篇文章时，可能接口已经失效，可以尽量去阅读代码而非效果。不过失效这一天，想必疫情已经结束，也是好事！

### 项目应用技术

- 使用ECharts实现中国地图及对应样式
- 使用node中的superagent及cheerio插件爬取网上数据
- 使用fetch实现ajax请求并解决其cors跨域问题

### 数据部分

我们将使用一个简单的爬虫来爬取对应网站上的数据，整个过程分为以下部分

- 向对应网站发送请求，获得返回的数据并进行处理（返回的是什么格式，找到需要的数据）
- 数据进行存放
- 建立服务器，将数据返回

#### 一.准备工作

我们首先需要下载两个必要的包，再引入自带的两个包，共计四个包。

- superagent  客户端请求模块 
  - 下载：node install superagent --save下载
  - 本质上是promise，会返回一个pronise，因此我们可以调用.then方法。
- cheerio 对dom进行操作
  - 下载：node install cheerio --save
  - 本质上是jQuery的实现，能够操作dom元素，但十分轻量化
- fs  node自带模块，操作文件
- path node自带模块，操作路径

#### 二.发送请求



### 界面部分

> <https://echarts.apache.org>     推荐前往官网主页学习使用教程

使用echart需要以下几个步骤

- 下载eCharts并引入，方法见官网教程。
- 创建eCharts实例
- 操作eCharts实例

#### 引入

- echarts.min.js：引入此文件，创建echart实例
- china.js：引入此文件，引入中国地图
- **tips：**在引入echarts,in.js时便已获得echarts变量（注意，不是echarts实例）

#### 创建实例

- 构建一个容器，即一个div

引入了**echarts.min.js**便获得了echats变量，调用变量上的方法创建实例

```js
const div = document.getElementsByClassName('demo')[0];
const myChart = echarts.init(div);
```

myChart就是echarts实例

#### 操作eCharts实例

首先我们需要明确需求，地图都要什么效果？

- 标题及简介
- 各省份划分，名称显示
- 点击出现各省确诊，治愈，死亡数量
- 根据人数对应不同的地图颜色

